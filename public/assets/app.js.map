{"version":3,"sources":["../src/index.js","scripts/store.js","scripts/screens/index/actions.js","scripts/screens/index/index.js","app.js"],"names":["Store","constructor","reducer","initialState","__subscribers","__state","subscribe","handler","push","this","_unsubscribe","dispatch","action","_state","_reducer","getState","use","middleware","next","filter","sub","_notify","forEach","subscriber","useThunk","ref","prototypeAccessors","newState","initState","files","content","search","state","type","length","payload","value","file","toLowerCase","includes","store","updateFiles","Object","keys","Boolean","fetchFiles","params","fetch","then","res","json","data","findFile","Index","el","_store","map","name","querySelector","searchEl","_searchEl","_files","addEventListener","handleInput","render","bind","e","currentTarget","fileName","reduce","acc","renderFile","innerHTML","document","indexPage"],"mappings":";;AIAA;;AAEA;;;ADFA,AFAA;ADAe,AIIfyE,IJJqBzE,CAAAA,GAInBC,AIAM,CAAC6D,SJAK5D,CAAZD,EAAqBE,CAArBF,EAAqBE,CIAvB,CAA0B,kBAA1B,EAA8C,YAAM;AJA7BA,AICrB,AFLK,ACCP,MHGuBA,AICfuE,CJDevE,EEJPsC,CFIOtC,IAAAA,CICN,GAAGsE,EFLb,CAAqB5C,KEKA,AFLrB,CEKsB6B,CFLM,YEKf,CAAuB,uBAAvB,CAAlB;AJDqBvD,AIGrB,AFNA,MEMIkD,CJNJjD,EEAO,WFGcD,AIGrB,CAAUuE,EJNM,EAGKvE,EAHL,GIMhB,EJLAE,AIKqBmC,OJNL,GACN,EAEWrC,EAFX,AIKV,KJYAG,SAjBU,GAiBVA,UAAYC,CAAZD,EAAYC;AAAAA,AIXb,AFNG0B,CEEJ,GFFIA,IAAI,EAAE,CFiBI1B,CAAAA,CACLH,WEnBA,EFkBKG,CACSC,IADTD,CACcA,CADdA,GACcA,YAAAA;AAAAA,AEjBxB4B,IAAAA,OAAO,EFmBM1B,AEnBJiC,CFmBIjC,CAAKC,IEnBH,CAACiC,IAAP,CAAYd,EFmBRpB,CAAkBF,CAAlBE,CAFWF,AEjBf,EAAmBY,MAAnB,CAA0ByB,OAA1B;AFmBsBrC,AErB1B,GAAP,EFkBYA;AAGqBA,AEjBlC,GFDsBJ,EAkBYI,KAGjCI,QAHiCJ,GAGjCI,UAAWC,CAAXD,EAAWC;AAAAA,IAAAA,CAAAA,CACJC,MADID,GACKH,CAAAA,CAAKK,QAALL,CAAcA,CAAAA,CAAKI,MAAnBJ,EAA2BG,CAA3BH,CADLG;AACgCA,AEnBtC,GFHgBT,EAsBsBS,IEnB7BiC,CFsBd9B,QAH2CH,CEnBtC,CAAoBkC,CFsBzB/B,KEtBK,EAA4B,KFsBjCA;AAAAA,AErBA,SAAO,EFsBEN,CAAAA,CAAKI,MADdE,AErBOJ,QAAQ,EAAI;AFsBLE,AErBZkC,GFLmB5C,CEKnB4C,CFqBYlC,IErBP,CFwBPG,AExBQ,GFqBMH,GAGdG,UAAMC,CAAND,EAAMC,IExBC,CAAL,CACG+B,IADH,CACQ,UAAAC,GAAG;AFuBPhC,AEvBO,ADRf,IAAMW,IDgCwB,KExBXqB,ADRJ,GCQO,ADRJ,CCQKC,IAAJ,CFwBW,CExBf,MFwBAjC,CADPA,EACOA;AAAAA,AExBA,ADPbY,EAAAA,GCME,EAEGmB,ADRA,EAAE,CDiCC9B,CAAAA,AE3BN,CAEQ,EFyBKT,CAAAA,CAAKE,MEzBVwC,EFuBGlC,EEvBC;AFyBMN,AEzBN,ADPZmB,IAAAA,EDgCkBnB,CAAAA,CAEbA,GClCE,ECOSA,ADPP,EADJ,CDiCaA,GAEFM,CAAAA,CAAWR,AE3BH,CF2BRQ,AE3BSwB,CF2BTxB,CAAiBC,CAAjBD,CAFEN,OEzBkB,CAACwC,IAAD,CAAZ,CAAZ;AF2BqBjC,AE3BrB,ADNZa,IAAAA,CCIA,KDJM,EAAE;ADiCyBb,AE1BlC,ADTM,GDCcf,AEIrB,EF8BmCe,KAGnCR,YAHmCQ,GAGnCR,UAAeH,CAAfG,EAAeH;AAAAA,AE5BhB,ADXiB,CAAlB,GDuCiBA,CAAAA,CACRH,aADQG,GACQE,CAAAA,CAAKL,aAALK,CAAmBU,MAAnBV,CAAmBU,UAAOC,CAAPD,EAAOC;AAAAA,aAAOA,CAAAA,KAAQb,CAAfa;AAAeb,AE3B3D,ADNP,IAAML,CDiCmBO,CADRF,GE1BD6C,EDNH,GAAG,GCMT,CAAkBhB,KAAlB,ADNDlC,ECM0B,KDNhB,CAAC8B,KAAD,EAAQpB,MAAR,EAAmB;ADiC+BL,AE1BhE,ADNA,GDNqBJ,CGDFkD,CHuC6C9C,IE1BzD,CF6BPc,ACnCQT,MAAM,CDgCkDL,AChCjD0B,GDmCfZ,CCnCA,WDmCAA;AAAAA,AE5BEY,ADNF,IDkCAZ,AE5BEY,CF4BFZ,CACOjB,EE7BD,CDND,CCMG,SF4BRiB,CACqBC,GCnCrB,CCKO,GF6BPD,CACqBC,UAAQC,CAARD,EAAQC;AAAAA,AE5B3BY,ADPmB,ICOnBA,OAAO,EF4BkCZ,AE5BhCa,CF4BgCb,CAAWd,CAAAA,CAAKM,QAALN,EAAXc,CAAdA;AAA8BR,AE9BpD,ACZP,AFQE,GCIF,EF6BAM,OCjCQU,KERIuB,CFQE,CERd,EAAgBd,AFQCR,KERjB,AFQsB,CAACH,CERA,IFQN,CAAYE,MAAZ,CAAmBG,MAAnB,GAA4BF,KAAK,CAACH,KAAN,CAAYE,MAAxC,GAAiDnB,MAAM,CAACuB,OAAvE;ADkCyDpB,AE1B5D,AChBwB,AFSrB,GDTmBZ,EA0CsCY,KAzCpDD,QAyCoDC,GAzCzCb,CADGC,EACHD,KACXW,ICOOmB,EDRI9B,GACFC,ACOd,CDTmBA;AAELA,ACQZ0B,CDdS,SCcTA,KAAK,EAAE;ADdE,AGKX,AFSWC,IDRG3B,CAAAA,GAAAA,CGDToD,GFSMzB,GETX,GAAcU,CFSI,EAAE5B,EETpB,IFS0B,CAACuB,OAAlB;ADRKhC,ACQsB4B,EDRtB5B,MAAAA,EAAAA,ECQsB4B,MAAM,EAANA;ADRtB5B,AGFO,AFUZ,IDRKA,WGCY,CHDZA,AGCa,EHDbA,CAAAA,KGCY,EAAW,OAAX,EACvBqD,GADuB,CACnB,UAAAC,IAAI;AHFGtD,AGEH,AFKX,aELemD,EAAE,CAACI,aAAH,4BAAoCD,IAApC,SAAJ;AHFGtD,AGEH,AFQZ,CDhBY,IGOe,CAHL;AAAA;AHEPA,AGFO,AFcvB,QEXSwD,CH2CKnC,AChCT,CDZWrB,GA4CFqB,GG9CS,OFcvB;ADgCcA,AG9CS,AFcF,QEXFK,CH2CLL,IG9CS,MH+CfC,CADMD,EACNC;AAAAA,AChCN,QDgCMA,CAAAA,GAAAA,AChCAW,CDgCAX,CAAAA,GChCK,GAAGb,EDgCRa,IChCc,CAACU,OAArB;ADgCMV,AGzCN,QHyCMA,CAAAA,AGzCDmC,GHyCCnC,CAAAA,CAAAA,IGzCN,GAAiBkC,CHyCXlC,OGzCN;AHyCMA,AGxCN,AFSA,SETKoC,EHwCCpC,CC/BAM,GETN,GAAcF,CFSF,ED+BqBX,CAA3BO,AC/BSO,CETf,CHwCiCd,GC/Bb,CAACW,KAAN,CAAYC,OAAZ,CAAoBX,MAApB,CAA2B,UAAAkB,IAAI;AD+BbnB,AC/Ba,aD+BbA,IC/BiBmB,IAAI,CAACC,CD+Bd1B,CAARM,EAAQN,OC/BS,GAAmB2B,QAAnB,CAA4BH,KAAK,CAACE,WAAN,EAA5B,CAAJ;AD+BL1B,AGtCzC,AFO8C,SEPzCgD,AFOU,CAAf,KDgCsB,GGvCtB,CAAeE,UHuCO,MGvCtB,CHuCWlD,AGvCqB,CHuCV,GACbA,CAAAA,CAAOD,CAAPC,AGxCT,EHwC0BG,AGxCe,CHwCfA,EAAjBH,CADa,CGvCwBmD,EH2CvC7C,CAAAA,CAAKN,CAALM,CALkCN,KGtCzC;AH2CYA,OALqBM;AAKrBN,AGzCZ4B,AFOA,IEPAA,CHoCMf,IGpCD,CAACd,QAAN,CAAe,cFOHqB,KAAZ,MEP0B,cAAX,CAAf;AHyCYpB,AGxCZ4B,AFMmBX,GD4BPL,CGlCZgB,KAAK,CAAClC,AFMauB,KAAK,IENxB,CAAgB,KAAKmC,MAAL,CAAYC,GFMGjC,CENf,CAAiB,GFMG,CENpB,AFMqBH,CENrC,IFMwB;ADb1BH,AGQC,AFK6CK,YAAAA,MAAM,EAANA;AAApB;ADb1BL,ACaE,CDbFA,CAAIb,MAAJa,CAAIb,GAAJa,GAAIb,YAAAA;AAAAA,ACcH,SDbQJ,KAAKJ,OADVQ;AACUR,CADdqB,EACcrB,CAAAA,CAIVQ,MAJUR,CAIVQ,GAJUR,GAIVQ,UAAOc,CAAPd,EAAOc,CGKCuC,GAAG;AHLJvC,AGMT,AFKF,ODVOtB,GGKC+B,IHNGT,CGME,EHLIA,CADNA,AGMKuC,CAAC,CHLAvC,AGKCwC,KHJX9C,OADUM,CGKD,CHNLA,AGMqBS,KAA9B;AHJKf,ACUL,CDjBFK,EAOOL,MAAAA,CAAAA,GCUEW,KAAP,QDVKX,CAAAA,CAAAA,CAAAA,SAAAA,EAAAA,CAAAA,CAPPK;AGaEc,AFZF,eDMOnB,MGMCV,QAAN,CAAe,uBAASyB,KAAT,CAAf;AACD,AFKF,CAnBD,KEgBE;;AFKF,IAAMI,KAAK,GAAG,IAAIxC,mBAAJ,CAAUE,OAAV,EAAmB0B,SAAnB,CAAd;AAEAY,KAAK,CAACxB,GAAN,CAAU,2BAAV;eAEewB,gBERF4B,UAAU;AACnB,0NAKcA,QALd;AAcD;;;2BAEMpC,OAAO;AAAA;;AACZ,UAAMH,KAAK,GAAGG,KAAK,CAACH,KAAN,CAAYE,MAAZ,CAAmBsC,MAAnB,CAA0B,UAACC,GAAD,EAAMjC,IAAN;AAAA,eAAeiC,GAAG,IAAI,KAAI,CAACC,UAAL,CAAgBlC,IAAhB,CAAtB;AAAA,OAA1B,EAAuE,EAAvE,CAAd;AAEA,WAAKwB,MAAL,CAAYW,SAAZ,GAAwB3C,KAAxB;AACD","file":"app.js","sourceRoot":"../../client","sourcesContent":["export default class Store {\n  __subscribers = []\n  __state = {}\n\n  constructor(reducer, initialState) {\n    this._reducer = reducer\n    this._state = initialState\n  }\n\n  get _state() {\n    return this.__state\n  }\n\n  // *TODO: write deep copy here | Created at: 27.Sep.2019\n  set _state(newState) {\n    this.__state = newState\n    this._notify()\n  }\n\n  subscribe = handler => {\n    this.__subscribers.push(handler)\n\n    return () => this._unsubscribe(handler)\n  }\n\n  dispatch = action => {\n    this._state = this._reducer(this._state, action)\n  }\n\n  getState = () => {\n    return this._state\n  }\n\n  use = middleware => {\n    if (typeof middleware !== 'function') return\n\n    const next = this.dispatch\n\n    this.dispatch = middleware(this)(next)\n  }\n\n  _unsubscribe = handler => {\n    this.__subscribers = this.__subscribers.filter(sub => sub !== handler)\n  }\n\n  _notify = () => {\n    this.__subscribers.forEach(subscriber => subscriber(this.getState()))\n  }\n}\n\nexport function useThunk() {\n  return ({ dispatch, getState }) => next => action => {\n    if (typeof action === 'function') {\n      return action(dispatch, getState())\n    }\n\n    return next(action)\n  }\n}\n","import Store, { useThunk } from 'redux-store'\n\nconst initState = {\n  files: {\n    content: [],\n    search: [],\n  }\n}\n\nconst reducer = (state, action) => {\n  switch (action.type) {\n  case 'Files/update': {\n    const search = state.files.search.length ? state.files.search : action.payload\n    return { ...state,\n      files: { content: action.payload, search }\n    }\n  }\n\n  case 'Files/search': {\n    const value = action.payload\n    const search = state.files.content.filter(file => file.toLowerCase().includes(value.toLowerCase()))\n\n    return { ...state, files: { ...state.files, search } }\n  }\n\n  default:\n    return state\n  }\n}\n\nconst store = new Store(reducer, initState)\n\nstore.use(useThunk())\n\nexport default store\n","export function updateFiles(files) {\n  return {\n    type: 'Files/update',\n    payload: Object.keys(files).filter(Boolean)\n  }\n}\n\nexport function fetchFiles(params) {\n  return dispatch => {\n    fetch('/api/repos/task1/tree')\n      .then(res => res.json())\n      .then(data => dispatch(updateFiles(data)))\n  }\n}\n\nexport function findFile(value) {\n  return {\n    type: 'Files/search',\n    payload: value\n  }\n}\n","import store from '../../store'\nimport { fetchFiles, findFile } from './actions'\n\nexport default class Index {\n  constructor(el, store) {\n    this._store = store\n\n    const [searchEl, files] = ['search', 'files']\n      .map(name => el.querySelector(`[data-el=\"Index/${name}\"]`))\n\n    this._searchEl = searchEl\n    this._files = files\n\n    this._searchEl.addEventListener('input', this.handleInput)\n\n    store.dispatch(fetchFiles('repos params'))\n    store.subscribe(this.render.bind(this))\n  }\n\n  handleInput(e) {\n    const value = e.currentTarget.value\n\n    store.dispatch(findFile(value))\n  }\n\n  // *TODO: поменять структуру файла в апи | Created at: 27.Sep.2019\n  renderFile(fileName) {\n    return `\n      <div class=\"Table-row\">\n        <div class=\"Table-cell\">\n          <div class=\"RepositoryFiles-icon\">\n            <div class=\"FileIcon FileIcon_folder\"></div>\n          </div>${fileName}</div>\n        <div class=\"Table-cell\"><a class=\"Link\" href=\"#\">d53dsv</a></div>\n        <div class=\"Table-cell\">[vcs] test for empty commit message</div>\n        <div class=\"Table-cell\">\n          <div class=\"Committer\">nikitxskv</div>\n        </div>\n        <div class=\"Table-cell\">1 min ago</div>\n      </div>\n    `\n  }\n\n  render(state) {\n    const files = state.files.search.reduce((acc, file) => acc += this.renderFile(file), '')\n\n    this._files.innerHTML = files\n  }\n}\n","import store from './scripts/store'\n\nimport Index from './scripts/screens/index'\n\ndocument.addEventListener('DOMContentLoaded', () => {\n  const indexPage = document.querySelector('[data-screen=\"Index\"]')\n\n  new Index(indexPage, store)\n})\n"]}